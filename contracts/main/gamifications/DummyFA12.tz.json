{
  "text_code":
    "{ parameter\n    (or (or (pair %burn (pair (address %admin) (address %target)) (nat %value))\n            (or %methods\n               (or (or (pair %approve (address %spender) (nat %value))\n                       (pair %getAllowance\n                          (pair (contract %callback nat) (address %owner))\n                          (address %spender)))\n                   (or (pair %getBalance (contract %callback nat) (address %owner))\n                       (contract %getTotalSupply nat)))\n               (pair %transfer (pair (address %address_from) (address %address_to)) (nat %value))))\n        (pair %mint (pair (address %admin) (address %target)) (nat %value))) ;\n  storage\n    (pair (pair (big_map %allowances (pair address address) nat) (big_map %tokens address nat))\n          (nat %total_amount)) ;\n  code { UNPAIR ;\n         IF_LEFT\n           { IF_LEFT\n               { PUSH string \"only the admin may call burn\" ;\n                 SWAP ;\n                 CAR ;\n                 CAR ;\n                 SENDER ;\n                 COMPARE ;\n                 EQ ;\n                 IF { DROP } { FAILWITH } ;\n                 NIL operation ;\n                 PAIR }\n               { IF_LEFT\n                   { IF_LEFT\n                       { IF_LEFT\n                           { SWAP ;\n                             DUP ;\n                             DUG 2 ;\n                             CAR ;\n                             CAR ;\n                             SENDER ;\n                             DUP 3 ;\n                             CAR ;\n                             PAIR ;\n                             GET ;\n                             IF_NONE { PUSH nat 0 } {} ;\n                             EMPTY_BIG_MAP (pair address address) nat ;\n                             PUSH nat 0 ;\n                             DUP 4 ;\n                             CDR ;\n                             COMPARE ;\n                             GT ;\n                             PUSH nat 0 ;\n                             DIG 3 ;\n                             COMPARE ;\n                             GT ;\n                             AND ;\n                             IF { SWAP ; DROP ; PUSH string \"Unsafe Allowance Change\" ; FAILWITH }\n                                { DROP ;\n                                  SWAP ;\n                                  DUP ;\n                                  DUG 2 ;\n                                  CAR ;\n                                  CAR ;\n                                  SWAP ;\n                                  DUP ;\n                                  DUG 2 ;\n                                  CDR ;\n                                  SOME ;\n                                  SENDER ;\n                                  DIG 3 ;\n                                  CAR ;\n                                  PAIR ;\n                                  UPDATE } ;\n                             SWAP ;\n                             DUP ;\n                             DUG 2 ;\n                             CDR ;\n                             DIG 2 ;\n                             CAR ;\n                             CDR ;\n                             DIG 2 ;\n                             PAIR ;\n                             PAIR ;\n                             NIL operation ;\n                             PAIR }\n                           { DUP ;\n                             CAR ;\n                             CAR ;\n                             PUSH mutez 0 ;\n                             DUP 4 ;\n                             CAR ;\n                             CAR ;\n                             DUP 4 ;\n                             CDR ;\n                             DIG 4 ;\n                             CAR ;\n                             CDR ;\n                             PAIR ;\n                             GET ;\n                             IF_NONE { PUSH nat 0 } {} ;\n                             TRANSFER_TOKENS ;\n                             SWAP ;\n                             NIL operation ;\n                             DIG 2 ;\n                             CONS ;\n                             PAIR } }\n                       { IF_LEFT\n                           { DUP ;\n                             CAR ;\n                             PUSH mutez 0 ;\n                             DUP 4 ;\n                             CAR ;\n                             CDR ;\n                             DIG 3 ;\n                             CDR ;\n                             GET ;\n                             IF_NONE { PUSH nat 0 } {} ;\n                             TRANSFER_TOKENS ;\n                             SWAP ;\n                             NIL operation ;\n                             DIG 2 ;\n                             CONS ;\n                             PAIR }\n                           { PUSH mutez 0 ;\n                             DUP 3 ;\n                             CDR ;\n                             TRANSFER_TOKENS ;\n                             SWAP ;\n                             NIL operation ;\n                             DIG 2 ;\n                             CONS ;\n                             PAIR } } }\n                   { EMPTY_BIG_MAP (pair address address) nat ;\n                     SWAP ;\n                     DUP ;\n                     DUG 2 ;\n                     CAR ;\n                     CAR ;\n                     SENDER ;\n                     COMPARE ;\n                     EQ ;\n                     IF { DROP ; SWAP ; DUP ; DUG 2 ; CAR ; CAR }\n                        { DUP 3 ;\n                          CAR ;\n                          CAR ;\n                          DUP 3 ;\n                          CAR ;\n                          CAR ;\n                          SENDER ;\n                          PAIR ;\n                          GET ;\n                          IF_NONE { PUSH nat 0 } {} ;\n                          DUP 3 ;\n                          CDR ;\n                          SWAP ;\n                          DUP ;\n                          DUG 2 ;\n                          COMPARE ;\n                          LT ;\n                          IF { DROP ; PUSH string \"Not Enough Allowance\" ; FAILWITH }\n                             { SWAP ;\n                               DROP ;\n                               DUP 3 ;\n                               CAR ;\n                               CAR ;\n                               DUP 3 ;\n                               CDR ;\n                               DIG 2 ;\n                               SUB ;\n                               ABS ;\n                               SOME ;\n                               DUP 3 ;\n                               CAR ;\n                               CAR ;\n                               SENDER ;\n                               PAIR ;\n                               UPDATE } } ;\n                     DUP 3 ;\n                     CAR ;\n                     CDR ;\n                     DUP 3 ;\n                     CAR ;\n                     CAR ;\n                     GET ;\n                     IF_NONE { PUSH nat 0 } {} ;\n                     EMPTY_BIG_MAP address nat ;\n                     DUP 4 ;\n                     CDR ;\n                     DUP 3 ;\n                     COMPARE ;\n                     LT ;\n                     IF { SWAP ; DIG 3 ; DROP 2 ; PUSH string \"Not Enough Balance\" ; FAILWITH }\n                        { DROP ;\n                          DUP 4 ;\n                          CAR ;\n                          CDR ;\n                          DUP 4 ;\n                          CDR ;\n                          DIG 2 ;\n                          SUB ;\n                          ABS ;\n                          SOME ;\n                          DUP 4 ;\n                          CAR ;\n                          CAR ;\n                          UPDATE ;\n                          DUP 3 ;\n                          CDR ;\n                          DUP 5 ;\n                          CAR ;\n                          CDR ;\n                          DUP 5 ;\n                          CAR ;\n                          CDR ;\n                          GET ;\n                          IF_NONE { PUSH nat 0 } {} ;\n                          ADD ;\n                          SOME ;\n                          DIG 3 ;\n                          CAR ;\n                          CDR ;\n                          UPDATE } ;\n                     DUP 3 ;\n                     CDR ;\n                     SWAP ;\n                     DIG 3 ;\n                     CAR ;\n                     CAR ;\n                     PAIR ;\n                     CDR ;\n                     DIG 2 ;\n                     PAIR ;\n                     PAIR ;\n                     NIL operation ;\n                     PAIR } } }\n           { PUSH string \"only the admin may call mint\" ;\n             SWAP ;\n             DUP ;\n             DUG 2 ;\n             CAR ;\n             CAR ;\n             SENDER ;\n             COMPARE ;\n             EQ ;\n             IF { DROP } { FAILWITH } ;\n             SWAP ;\n             DUP ;\n             DUG 2 ;\n             CDR ;\n             DUP 3 ;\n             CAR ;\n             CDR ;\n             PUSH nat 4 ;\n             DIG 3 ;\n             CAR ;\n             CDR ;\n             SWAP ;\n             SOME ;\n             SWAP ;\n             UPDATE ;\n             DIG 2 ;\n             CAR ;\n             CAR ;\n             PAIR ;\n             PAIR ;\n             NIL operation ;\n             PAIR } } }"
}
